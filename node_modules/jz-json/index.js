var Resource = require('deployd/lib/resource')
    , util = require('util')
    ,  fs=require('fs');

function Json(name, options) {
    Resource.apply(this, arguments);
}
util.inherits(Json, Resource);
module.exports = Json;

Json.prototype.clientGeneration = false;

Json.prototype.handle = function (ctx, next) {
    if(ctx.req && ctx.req.method !== 'GET') return next();
    var parts=ctx.req.url.split('/');
    if(parts[1]!=='json') return next();
    var params=parts[2].split('?');
  fs.readFile('./json/'+params[0]+'.json',"utf8",function(err,data){
  	if (err) ctx.done(err,'');
  	var result=JSON.parse(data);
  	//console.log(result[0]);
  	 ctx.done(null,result);
  });
}